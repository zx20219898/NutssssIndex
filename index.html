<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no">
    <title>zx's home</title>
    <meta name="description"
          content="这里是网站介绍">
    <meta name="keywords" content="这里是网站关键词">
    <link rel="stylesheet" type="text/css" href="./css/FiraCode.css">
    <link rel="stylesheet" type="text/css" href="./css/nutssss.css">
    <link rel="icon" href="./favicon.ico">


    <style type="text/css">
        /* 滚动条 */
        ::-webkit-scrollbar-thumb {
            background-color: #b700ff;
            background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, .4) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, .4) 50%, rgba(255, 255, 255, .4) 75%, transparent 75%, transparent);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-track {
            background-color: #eeeeee;
            border-radius: 5px;
        }

        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        /*鼠标样式开始*/
        /*鼠标指针样式*/
        body {
            cursor: url("curs/normal.cur"), default;
        }

        /*鼠标链接指针样式*/
        a:hover {
            cursor: url("curs/link.cur"), pointer;
        }

        /*鼠标样式结束*/
    </style>

    <!--百度统计-->
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?a52ea876f9db22d2f411f4996578e8ab";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>

<body  onselectstart="return false;">

<div id="box">
    <!-- 个人资料卡片 -->
    <div class="meBox">
        <!-- 头像 -->
        <div class="headPhoto"></div>
        <!-- 介绍 -->
        <div class="meBox-title">
            <p>ZhangXin</p>
            <div class="fg"></div>
        </div>
        <div class="meBox-text">
            <!--                <p>不是一条咸鱼<img src="./img/fish.png" alt="咸鱼" style="width: 20px; vertical-align: middle;"></p>-->
<!--            <p>知行gapm合一.</p>-->

<!--            <p>竹亭，浊酒，明月。</p>-->
<!--            <p>兴尽晚回舟。</p>-->
            <p>你是人间烟火不自知, </p>
            <p>我在俗世仰望应如是. </p>
            <p>——《青岛与诗》</p>
<!--            <p>雨声潺潺，</p>-->
<!---->
<!--            <p>像住在溪边，</p>-->
<!---->
<!--            <p>   宁愿天天下雨，</p>-->
<!---->
<!--            <p>   以为你是因为下雨不来。</p>-->
<!---->
<!--            <p>   ——张爱玲</p>-->
<!--            <p>醒来万物皆是沉寂，唯有你是世间的一抹旖旎，他人困于山中晨雾，我困于你.</p>-->
<!--            <p>对待自己温柔一点。你只不过是宇宙的孩子，与植物、星辰没什么两样。</p>-->
<!--            <p>时间总是一点一点流逝，切不可辜负人间。</p>-->
            <!--                <p>上了年纪，不爱说话~</p>-->
            <!--                <p>上了年纪，不爱说话~</p>-->
            <!--                <p>最爱<img src="./img/002.png" alt="冰激凌" style="width: 15px; vertical-align: middle;"></p>-->
        </div>
        <!-- 两个按钮 -->
        <div class="meBox-Button">
            <a style="color: rgb(160, 32, 240)" href="#">点我</a>
            <a style="color: rgb(160, 32, 240)"
               href="http://wpa.qq.com/msgrd?v=3&uin=1205362172&site=qq&menu=yes">联系</a>
        </div>
    </div>

    <!-- 伪终端介绍 -->
    <div id="cmdBox">
        <!-- 第一个终端 -->
        <div class="cmd">
            <!-- 三个按钮 -->
            <div class="click">
                <div class="red"></div>
                <div class="yellow"></div>
                <div class="green"></div>
            </div>
            <!-- 顶部标题 -->
            <div class="title">
                <span>love <img src="https://img-blog.csdnimg.cn/6a080bf277064412acbd45f0a2aa0c80.png#pic_center" alt=""
                                style="width: 20px; vertical-align: middle;"> bash</span>
            </div>
            <!-- 终端内文字 -->
            <div class="cmdText">
                <span style="color: rgb(0, 190, 0);">zhangxin@MacBook-Air ~ %</span>
                <!--                    <span style="color: blue;">~</span>-->
                <span style="color: blue;">./tianqi.sh</span>
                <br/>
                <iframe scrolling="no" src="https://tianqiapi.com/api.php?style=tb&skin=pitaya" frameborder="0"
                        width="350" height="24" allowtransparency="true"></iframe>
                <br/>
                <span style="color: rgb(0, 190, 0);">zhangxin@MacBook-Air ~ %</span>
                <span style="color: blue;">cat me.txt</span>
                <p>爱好：程序设计、美食烹饪、魔术表演、游泳健身、旅行登高、动漫影视</p>
                <p>坐标上海，Java开发工程师。</p>
                <span style="color: blue">sudo rm -rf /所有的缺点和不足/*</span>
                <p><span style="color: rgb(238, 154, 0)">Warning: </span><span>做人不要太贪心~</span></p>
            </div>
        </div>
        <!-- 第二个终端 -->
        <div class="cmd cmd2">
            <!-- 三个按钮 -->
            <div class="click">
                <div class="red"></div>
                <div class="yellow"></div>
                <div class="green"></div>
            </div>
            <!-- 顶部标题 -->
            <div class="title">
                <span>love <img src="https://img-blog.csdnimg.cn/6a080bf277064412acbd45f0a2aa0c80.png#pic_center"
                                style="width: 20px; vertical-align: middle;"> bash</span>
            </div>
            <!-- 终端内文字 -->
            <div class="cmdText">
                <span style="color: rgb(0, 190, 0);">zhangxin@MacBook-Air ~ %</span>
                <!--                    <span style="color: blue;">~</span>-->
                <span style="color: blue">java LinkList</span>
                <!--                    <span style="color: blue">./links.sh</span>-->
                <p>我的其他站点：</p>
                <ul class="ul">
                    <li><a style="color: rgb(255, 20, 147)" href="https://zxblog.eu.org/">Blog</a></li>
                    <li><a style="color: rgb(255, 20, 147)" href="https://zxgame.vercel.app/">Game</a></li>
                    <li><a style="color: rgb(255, 20, 147)" href="https://zxvideo.vercel.app/">Video</a></li>
                    <!--                        <li><a href="https://note.zhangxin.cn/">Note</a></li>-->
                    <!--                        <li><a href="https://mc.zhangxin.cn/">Mc</a></li>-->
                    <!--                        <li><a href="https://mc.zhangxin.cn/blog/">McBlog</a></li>-->
                </ul>
                <span style="color: rgb(0, 190, 0);">zhangxin@MacBook-Air ~ %</span>
                <span style="color: blue;">vim 寄语.md</span>
                <!--                    <p>万事开头难的意思是，只是开头难点，后面熟练了就不难了。无他，唯手熟尔。勿毕其功于一役。</p>-->
                <!--                    <p style="color: blue;">~</p>-->
                <!--                    <p>人生的本质就是不断的解决问题，人生就像一部电视剧，20多集的疑惑在30集自然能找到答案。</p>-->
                <!--                    <p style="color: blue;">~</p>-->
                <p>法治不诛心，诛心非法治。</p>
                <p style="color: blue;">~</p>
                <p>人类所有真实的快乐，一定是恒久的努力。</p>
                <p style="color: blue;">~</p>
                <p>Just do it, do not think more. </p>
                <p style="color: blue;">~</p>
                <p>Never really desperate, only the lost of the soul. </p>
                <p style="color: blue;">~</p>
                <p style="color: blue;">~</p>
                <p style="color: blue;">~</p>
                <!--                    <span style="color: rgb(0, 190, 0);">zhangxin@MacBook-Air ~ %</span>-->
                <!--                    <span style="color: blue;">echo</span>-->
                <!--                    <p> > 寄语.text</p>-->

                <span style="color: rgb(0, 190, 0);">zhangxin@MacBook-Air ~ %</span>
<!--                <span style="color: blue;">vi 做人最基本的法则.md</span>-->
                <p style="color: blue;">~</p>
<!--                <p>当与人为善，学会控制情绪，</p>-->
<!--                <p style="color: blue;">~</p>-->
            </div>
        </div>
    </div>
</div>

<!-- 页脚 -->
<div id="footer">
    <p> © 2022 zhangxin | <a href="http://beian.miit.gov.cn">皖ICP备2021018914号</a></p>
    <!--        <p>THEME MADE BY <a href="https://zhangxin.cn/">zhangxin</a></p>-->
</div>

<!--<div  class="headline"><div class="icon_text"><a href="/search?q=%e7%be%8e%e6%b4%b2%e7%8b%ae&amp;FORM=hpcapt&amp;filters=HpDate:&quot;20220915_1600&quot;" data-h="ID=HpApp,27763.1"><div class="icon"><svg class="mappin" height="16" width="16" viewBox="0 0 12 12" aria-hidden="true" role="presentation"><path d="M0 0h12v12h-12z" fill="none"></path><path d="M6.5 3a1.5 1.5 0 1 0 1.5 1.5 1.5 1.5 0 0 0-1.5-1.5zm0-3a4.5 4.5 0 0 0-4.5 4.5 5.607 5.607 0 0 0 .087.873c.453 2.892 2.951 5.579 3.706 6.334a1 1 0 0 0 1.414 0c.755-.755 3.253-3.442 3.706-6.334a5.549 5.549 0 0 0 .087-.873 4.5 4.5 0 0 0-4.5-4.5zm3.425 5.218c-.36 2.296-2.293 4.65-3.425 5.782-1.131-1.132-3.065-3.486-3.425-5.782a4.694 4.694 0 0 1-.075-.718 3.5 3.5 0 0 1 7 0 4.634 4.634 0 0 1-.075.718z"></path></svg></div><h1 class="text" id="headline">敏捷而隐秘</h1></a></div><div class="nav"><a href="#" data-h="ID=HpApp,19231.1" id="leftNav" class="leftNav " role="button" aria-label="上一个图像"></a><a href="#" data-h="ID=HpApp,21465.1" id="rightNav" class="rightNav disabled" role="button" aria-label="下一个图像"></a></div></div>-->

<audio autoplay id="msc" src="https://api.uomg.com/api/rand.music?sort=any">
</audio>
<script>
    document.documentElement.addEventListener("click", function () {
        msc.play();
    });
</script>

<script>
    function clickEffect() {
        let balls = [];
        let longPressed = false;
        let longPress;
        let multiplier = 0;
        let width, height;
        let origin;
        let normal;
        let ctx;
        const colours = ["#F73859", "#14FFEC", "#00E0FF", "#FF99FE", "#FAF15D"];
        const canvas = document.createElement("canvas");
        document.body.appendChild(canvas);
        canvas.setAttribute("style", "width: 100%; height: 100%; top: 0; left: 0; z-index: 99999; position: fixed; pointer-events: none;");
        const pointer = document.createElement("span");
        pointer.classList.add("pointer");
        document.body.appendChild(pointer);

        if (canvas.getContext && window.addEventListener) {
            ctx = canvas.getContext("2d");
            updateSize();
            window.addEventListener('resize', updateSize, false);
            loop();
            window.addEventListener("mousedown", function(e) {
                pushBalls(randBetween(10, 20), e.clientX, e.clientY);
                document.body.classList.add("is-pressed");
                longPress = setTimeout(function(){
                    document.body.classList.add("is-longpress");
                    longPressed = true;
                }, 500);
            }, false);
            window.addEventListener("mouseup", function(e) {
                clearInterval(longPress);
                if (longPressed == true) {
                    document.body.classList.remove("is-longpress");
                    pushBalls(randBetween(50 + Math.ceil(multiplier), 100 + Math.ceil(multiplier)), e.clientX, e.clientY);
                    longPressed = false;
                }
                document.body.classList.remove("is-pressed");
            }, false);
            window.addEventListener("mousemove", function(e) {
                let x = e.clientX;
                let y = e.clientY;
                pointer.style.top = y + "px";
                pointer.style.left = x + "px";
            }, false);
        } else {
            console.log("canvas or addEventListener is unsupported!");
        }


        function updateSize() {
            canvas.width = window.innerWidth * 2;
            canvas.height = window.innerHeight * 2;
            canvas.style.width = window.innerWidth + 'px';
            canvas.style.height = window.innerHeight + 'px';
            ctx.scale(2, 2);
            width = (canvas.width = window.innerWidth);
            height = (canvas.height = window.innerHeight);
            origin = {
                x: width / 2,
                y: height / 2
            };
            normal = {
                x: width / 2,
                y: height / 2
            };
        }
        class Ball {
            constructor(x = origin.x, y = origin.y) {
                this.x = x;
                this.y = y;
                this.angle = Math.PI * 2 * Math.random();
                if (longPressed == true) {
                    this.multiplier = randBetween(14 + multiplier, 15 + multiplier);
                } else {
                    this.multiplier = randBetween(6, 12);
                }
                this.vx = (this.multiplier + Math.random() * 0.5) * Math.cos(this.angle);
                this.vy = (this.multiplier + Math.random() * 0.5) * Math.sin(this.angle);
                this.r = randBetween(8, 12) + 3 * Math.random();
                this.color = colours[Math.floor(Math.random() * colours.length)];
            }
            update() {
                this.x += this.vx - normal.x;
                this.y += this.vy - normal.y;
                normal.x = -2 / window.innerWidth * Math.sin(this.angle);
                normal.y = -2 / window.innerHeight * Math.cos(this.angle);
                this.r -= 0.3;
                this.vx *= 0.9;
                this.vy *= 0.9;
            }
        }

        function pushBalls(count = 1, x = origin.x, y = origin.y) {
            for (let i = 0; i < count; i++) {
                balls.push(new Ball(x, y));
            }
        }

        function randBetween(min, max) {
            return Math.floor(Math.random() * max) + min;
        }

        function loop() {
            ctx.fillStyle = "rgba(255, 255, 255, 0)";
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < balls.length; i++) {
                let b = balls[i];
                if (b.r < 0) continue;
                ctx.fillStyle = b.color;
                ctx.beginPath();
                ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2, false);
                ctx.fill();
                b.update();
            }
            if (longPressed == true) {
                multiplier += 0.2;
            } else if (!longPressed && multiplier >= 0) {
                multiplier -= 0.4;
            }
            removeBall();
            requestAnimationFrame(loop);
        }

        function removeBall() {
            for (let i = 0; i < balls.length; i++) {
                let b = balls[i];
                if (b.x + b.r < 0 || b.x - b.r > width || b.y + b.r < 0 || b.y - b.r > height || b.r < 0) {
                    balls.splice(i, 1);
                }
            }
        }
    }
    clickEffect();//调用特效函数
</script>


<!-- 以下为爱心点击特效-->
<!--<script>(function(window,document,undefined){var hearts=[];window.requestAnimationFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,1000/60)}})();init();function init(){css(".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;}.heart:after{top: -5px;}.heart:before{left: -5px;}");attachEvent();gameloop()}function gameloop(){for(var i=0;i<hearts.length;i++){if(hearts[i].alpha<=0){document.body.removeChild(hearts[i].el);hearts.splice(i,1);continue}hearts[i].y&#45;&#45;;hearts[i].scale+=0.004;hearts[i].alpha-=0.013;hearts[i].el.style.cssText="left:"+hearts[i].x+"px;top:"+hearts[i].y+"px;opacity:"+hearts[i].alpha+";transform:scale("+hearts[i].scale+","+hearts[i].scale+") rotate(45deg);background:"+hearts[i].color}requestAnimationFrame(gameloop)}function attachEvent(){var old=typeof window.οnclick==="function"&&window.onclick;window.onclick=function(event){old&&old();createHeart(event)}}function createHeart(event){var d=document.createElement("div");d.className="heart";hearts.push({el:d,x:event.clientX-5,y:event.clientY-5,scale:1,alpha:1,color:randomColor()});document.body.appendChild(d)}function css(css){var style=document.createElement("style");style.type="text/css";try{style.appendChild(document.createTextNode(css))}catch(ex){style.styleSheet.cssText=css}document.getElementsByTagName('head')[0].appendChild(style)}function randomColor(){return"rgb("+(~~(Math.random()*255))+","+(~~(Math.random()*255))+","+(~~(Math.random()*255))+")"}})(window,document);</script>-->

<!-- 以下为樱花背景代码-->
<!--<canvas id="sakura"></canvas><style>body{padding:0;margin:0;overflow:hidden;height:600px}canvas{padding:0;margin:0}div.btnbg{position:fixed;left:0;top:0}#text{position:absolute;text-align:center;z-index:999;width:100%;height:100px}#text>.span{font-weight:700;font-size:27px;color:#E2B2AD;margin-top:22%}.title{font-size:40px;color:rgb(250,185,230)}.last{margin-top:22%;font-size:17px;color:dimgrey;margin-left:90%}</style>&lt;!&ndash;sakura shader&ndash;&gt;<script id="sakura_point_vsh"type="x-shader/x_vertex">uniform mat4 uProjection;uniform mat4 uModelview;uniform vec3 uResolution;uniform vec3 uOffset;uniform vec3 uDOF;uniform vec3 uFade;attribute vec3 aPosition;attribute vec3 aEuler;attribute vec2 aMisc;varying vec3 pposition;varying float psize;varying float palpha;varying float pdist;varying vec3 normX;varying vec3 normY;varying vec3 normZ;varying vec3 normal;varying float diffuse;varying float specular;varying float rstop;varying float distancefade;void main(void){vec4 pos=uModelview*vec4(aPosition+uOffset,1.0);gl_Position=uProjection*pos;gl_PointSize=aMisc.x*uProjection[1][1]/-pos.z*uResolution.y*0.5;pposition=pos.xyz;psize=aMisc.x;pdist=length(pos.xyz);palpha=smoothstep(0.0,1.0,(pdist-0.1)/uFade.z);vec3 elrsn=sin(aEuler);vec3 elrcs=cos(aEuler);mat3 rotx=mat3(1.0,0.0,0.0,0.0,elrcs.x,elrsn.x,0.0,-elrsn.x,elrcs.x);mat3 roty=mat3(elrcs.y,0.0,-elrsn.y,0.0,1.0,0.0,elrsn.y,0.0,elrcs.y);mat3 rotz=mat3(elrcs.z,elrsn.z,0.0,-elrsn.z,elrcs.z,0.0,0.0,0.0,1.0);mat3 rotmat=rotx*roty*rotz;normal=rotmat[2];mat3 trrotm=mat3(rotmat[0][0],rotmat[1][0],rotmat[2][0],rotmat[0][1],rotmat[1][1],rotmat[2][1],rotmat[0][2],rotmat[1][2],rotmat[2][2]);normX=trrotm[0];normY=trrotm[1];normZ=trrotm[2];const vec3 lit=vec3(0.6917144638660746,0.6917144638660746,-0.20751433915982237);float tmpdfs=dot(lit,normal);if(tmpdfs<0.0){normal=-normal;tmpdfs=dot(lit,normal)}diffuse=0.4+tmpdfs;vec3 eyev=normalize(-pos.xyz);if(dot(eyev,normal)>0.0){vec3 hv=normalize(eyev+lit);specular=pow(max(dot(hv,normal),0.0),20.0)}else{specular=0.0}rstop=clamp((abs(pdist-uDOF.x)-uDOF.y)/uDOF.z,0.0,1.0);rstop=pow(rstop,0.5);distancefade=min(1.0,exp((uFade.x-pdist)*0.69315/uFade.y))}</script><script id="sakura_point_fsh"type="x-shader/x_fragment">#ifdef GL_ES precision highp float;#endif uniform vec3 uDOF;uniform vec3 uFade;const vec3 fadeCol=vec3(0.08,0.03,0.06);varying vec3 pposition;varying float psize;varying float palpha;varying float pdist;varying vec3 normX;varying vec3 normY;varying vec3 normZ;varying vec3 normal;varying float diffuse;varying float specular;varying float rstop;varying float distancefade;float ellipse(vec2 p,vec2 o,vec2 r){vec2 lp=(p-o)/r;return length(lp)-1.0}void main(void){vec3 p=vec3(gl_PointCoord-vec2(0.5,0.5),0.0)*2.0;vec3 d=vec3(0.0,0.0,-1.0);float nd=normZ.z;if(abs(nd)<0.0001)discard;float np=dot(normZ,p);vec3 tp=p+d*np/nd;vec2 coord=vec2(dot(normX,tp),dot(normY,tp));const float flwrsn=0.258819045102521;const float flwrcs=0.965925826289068;mat2 flwrm=mat2(flwrcs,-flwrsn,flwrsn,flwrcs);vec2 flwrp=vec2(abs(coord.x),coord.y)*flwrm;float r;if(flwrp.x<0.0){r=ellipse(flwrp,vec2(0.065,0.024)*0.5,vec2(0.36,0.96)*0.5)}else{r=ellipse(flwrp,vec2(0.065,0.024)*0.5,vec2(0.58,0.96)*0.5)}if(r>rstop)discard;vec3 col=mix(vec3(1.0,0.8,0.75),vec3(1.0,0.9,0.87),r);float grady=mix(0.0,1.0,pow(coord.y*0.5+0.5,0.35));col*=vec3(1.0,grady,grady);col*=mix(0.8,1.0,pow(abs(coord.x),0.3));col=col*diffuse+specular;col=mix(fadeCol,col,distancefade);float alpha=(rstop>0.001)?(0.5-r/(rstop*2.0)):1.0;alpha=smoothstep(0.0,1.0,alpha)*palpha;gl_FragColor=vec4(col*0.5,alpha)}</script>&lt;!&ndash;effects&ndash;&gt;<script id="fx_common_vsh"type="x-shader/x_vertex">uniform vec3 uResolution;attribute vec2 aPosition;varying vec2 texCoord;varying vec2 screenCoord;void main(void){gl_Position=vec4(aPosition,0.0,1.0);texCoord=aPosition.xy*0.5+vec2(0.5,0.5);screenCoord=aPosition.xy*vec2(uResolution.z,1.0)}</script><script id="bg_fsh"type="x-shader/x_fragment">#ifdef GL_ES precision highp float;#endif uniform vec2 uTimes;varying vec2 texCoord;varying vec2 screenCoord;void main(void){vec3 col;float c;vec2 tmpv=texCoord*vec2(0.8,1.0)-vec2(0.95,1.0);c=exp(-pow(length(tmpv)*1.8,2.0));col=mix(vec3(0.02,0.0,0.03),vec3(0.96,0.98,1.0)*1.5,c);gl_FragColor=vec4(col*0.5,1.0)}</script><script id="fx_brightbuf_fsh"type="x-shader/x_fragment">#ifdef GL_ES precision highp float;#endif uniform sampler2D uSrc;uniform vec2 uDelta;varying vec2 texCoord;varying vec2 screenCoord;void main(void){vec4 col=texture2D(uSrc,texCoord);gl_FragColor=vec4(col.rgb*2.0-vec3(0.5),1.0)}</script><script id="fx_dirblur_r4_fsh"type="x-shader/x_fragment">#ifdef GL_ES precision highp float;#endif uniform sampler2D uSrc;uniform vec2 uDelta;uniform vec4 uBlurDir;varying vec2 texCoord;varying vec2 screenCoord;void main(void){vec4 col=texture2D(uSrc,texCoord);col=col+texture2D(uSrc,texCoord+uBlurDir.xy*uDelta);col=col+texture2D(uSrc,texCoord-uBlurDir.xy*uDelta);col=col+texture2D(uSrc,texCoord+(uBlurDir.xy+uBlurDir.zw)*uDelta);col=col+texture2D(uSrc,texCoord-(uBlurDir.xy+uBlurDir.zw)*uDelta);gl_FragColor=col/5.0}</script>&lt;!&ndash;effect fragment shader template&ndash;&gt;<script id="fx_common_fsh"type="x-shader/x_fragment">#ifdef GL_ES precision highp float;#endif uniform sampler2D uSrc;uniform vec2 uDelta;varying vec2 texCoord;varying vec2 screenCoord;void main(void){gl_FragColor=texture2D(uSrc,texCoord)}</script>&lt;!&ndash;post processing&ndash;&gt;<script id="pp_final_vsh"type="x-shader/x_vertex">uniform vec3 uResolution;attribute vec2 aPosition;varying vec2 texCoord;varying vec2 screenCoord;void main(void){gl_Position=vec4(aPosition,0.0,1.0);texCoord=aPosition.xy*0.5+vec2(0.5,0.5);screenCoord=aPosition.xy*vec2(uResolution.z,1.0)}</script><script id="pp_final_fsh"type="x-shader/x_fragment">#ifdef GL_ES precision highp float;#endif uniform sampler2D uSrc;uniform sampler2D uBloom;uniform vec2 uDelta;varying vec2 texCoord;varying vec2 screenCoord;void main(void){vec4 srccol=texture2D(uSrc,texCoord)*2.0;vec4 bloomcol=texture2D(uBloom,texCoord);vec4 col;col=srccol+bloomcol*(vec4(1.0)+srccol);col*=smoothstep(1.0,0.0,pow(length((texCoord-vec2(0.5))*2.0),1.2)*0.5);col=pow(col,vec4(0.45454545454545));gl_FragColor=vec4(col.rgb,1.0);gl_FragColor.a=1.0}</script><script>var Vector3={};var Matrix44={};Vector3.create=function(x,y,z){return{'x':x,'y':y,'z':z}};Vector3.dot=function(v0,v1){return v0.x*v1.x+v0.y*v1.y+v0.z*v1.z};Vector3.cross=function(v,v0,v1){v.x=v0.y*v1.z-v0.z*v1.y;v.y=v0.z*v1.x-v0.x*v1.z;v.z=v0.x*v1.y-v0.y*v1.x};Vector3.normalize=function(v){var l=v.x*v.x+v.y*v.y+v.z*v.z;if(l>0.00001){l=1.0/Math.sqrt(l);v.x*=l;v.y*=l;v.z*=l}};Vector3.arrayForm=function(v){if(v.array){v.array[0]=v.x;v.array[1]=v.y;v.array[2]=v.z}else{v.array=new Float32Array([v.x,v.y,v.z])}return v.array};Matrix44.createIdentity=function(){return new Float32Array([1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0])};Matrix44.loadProjection=function(m,aspect,vdeg,near,far){var h=near*Math.tan(vdeg*Math.PI/180.0*0.5)*2.0;var w=h*aspect;m[0]=2.0*near/w;m[1]=0.0;m[2]=0.0;m[3]=0.0;m[4]=0.0;m[5]=2.0*near/h;m[6]=0.0;m[7]=0.0;m[8]=0.0;m[9]=0.0;m[10]=-(far+near)/(far-near);m[11]=-1.0;m[12]=0.0;m[13]=0.0;m[14]=-2.0*far*near/(far-near);m[15]=0.0};Matrix44.loadLookAt=function(m,vpos,vlook,vup){var frontv=Vector3.create(vpos.x-vlook.x,vpos.y-vlook.y,vpos.z-vlook.z);Vector3.normalize(frontv);var sidev=Vector3.create(1.0,0.0,0.0);Vector3.cross(sidev,vup,frontv);Vector3.normalize(sidev);var topv=Vector3.create(1.0,0.0,0.0);Vector3.cross(topv,frontv,sidev);Vector3.normalize(topv);m[0]=sidev.x;m[1]=topv.x;m[2]=frontv.x;m[3]=0.0;m[4]=sidev.y;m[5]=topv.y;m[6]=frontv.y;m[7]=0.0;m[8]=sidev.z;m[9]=topv.z;m[10]=frontv.z;m[11]=0.0;m[12]=-(vpos.x*m[0]+vpos.y*m[4]+vpos.z*m[8]);m[13]=-(vpos.x*m[1]+vpos.y*m[5]+vpos.z*m[9]);m[14]=-(vpos.x*m[2]+vpos.y*m[6]+vpos.z*m[10]);m[15]=1.0};var timeInfo={'start':0,'prev':0,'delta':0,'elapsed':0};var gl;var renderSpec={'width':0,'height':0,'aspect':1,'array':new Float32Array(3),'halfWidth':0,'halfHeight':0,'halfArray':new Float32Array(3)};renderSpec.setSize=function(w,h){renderSpec.width=w;renderSpec.height=h;renderSpec.aspect=renderSpec.width/renderSpec.height;renderSpec.array[0]=renderSpec.width;renderSpec.array[1]=renderSpec.height;renderSpec.array[2]=renderSpec.aspect;renderSpec.halfWidth=Math.floor(w/2);renderSpec.halfHeight=Math.floor(h/2);renderSpec.halfArray[0]=renderSpec.halfWidth;renderSpec.halfArray[1]=renderSpec.halfHeight;renderSpec.halfArray[2]=renderSpec.halfWidth/renderSpec.halfHeight};function deleteRenderTarget(rt){gl.deleteFramebuffer(rt.frameBuffer);gl.deleteRenderbuffer(rt.renderBuffer);gl.deleteTexture(rt.texture)}function createRenderTarget(w,h){var ret={'width':w,'height':h,'sizeArray':new Float32Array([w,h,w/h]),'dtxArray':new Float32Array([1.0/w,1.0/h])};ret.frameBuffer=gl.createFramebuffer();ret.renderBuffer=gl.createRenderbuffer();ret.texture=gl.createTexture();gl.bindTexture(gl.TEXTURE_2D,ret.texture);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,w,h,0,gl.RGBA,gl.UNSIGNED_BYTE,null);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR);gl.bindFramebuffer(gl.FRAMEBUFFER,ret.frameBuffer);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,ret.texture,0);gl.bindRenderbuffer(gl.RENDERBUFFER,ret.renderBuffer);gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,w,h);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,ret.renderBuffer);gl.bindTexture(gl.TEXTURE_2D,null);gl.bindRenderbuffer(gl.RENDERBUFFER,null);gl.bindFramebuffer(gl.FRAMEBUFFER,null);return ret}function compileShader(shtype,shsrc){var retsh=gl.createShader(shtype);gl.shaderSource(retsh,shsrc);gl.compileShader(retsh);if(!gl.getShaderParameter(retsh,gl.COMPILE_STATUS)){var errlog=gl.getShaderInfoLog(retsh);gl.deleteShader(retsh);console.error(errlog);return null}return retsh}function createShader(vtxsrc,frgsrc,uniformlist,attrlist){var vsh=compileShader(gl.VERTEX_SHADER,vtxsrc);var fsh=compileShader(gl.FRAGMENT_SHADER,frgsrc);if(vsh==null||fsh==null){return null}var prog=gl.createProgram();gl.attachShader(prog,vsh);gl.attachShader(prog,fsh);gl.deleteShader(vsh);gl.deleteShader(fsh);gl.linkProgram(prog);if(!gl.getProgramParameter(prog,gl.LINK_STATUS)){var errlog=gl.getProgramInfoLog(prog);console.error(errlog);return null}if(uniformlist){prog.uniforms={};for(var i=0;i<uniformlist.length;i++){prog.uniforms[uniformlist[i]]=gl.getUniformLocation(prog,uniformlist[i])}}if(attrlist){prog.attributes={};for(var i=0;i<attrlist.length;i++){var attr=attrlist[i];prog.attributes[attr]=gl.getAttribLocation(prog,attr)}}return prog}function useShader(prog){gl.useProgram(prog);for(var attr in prog.attributes){gl.enableVertexAttribArray(prog.attributes[attr])}}function unuseShader(prog){for(var attr in prog.attributes){gl.disableVertexAttribArray(prog.attributes[attr])}gl.useProgram(null)}var projection={'angle':60,'nearfar':new Float32Array([0.1,100.0]),'matrix':Matrix44.createIdentity()};var camera={'position':Vector3.create(0,0,100),'lookat':Vector3.create(0,0,0),'up':Vector3.create(0,1,0),'dof':Vector3.create(10.0,4.0,8.0),'matrix':Matrix44.createIdentity()};var pointFlower={};var meshFlower={};var sceneStandBy=false;var BlossomParticle=function(){this.velocity=new Array(3);this.rotation=new Array(3);this.position=new Array(3);this.euler=new Array(3);this.size=1.0;this.alpha=1.0;this.zkey=0.0};BlossomParticle.prototype.setVelocity=function(vx,vy,vz){this.velocity[0]=vx;this.velocity[1]=vy;this.velocity[2]=vz};BlossomParticle.prototype.setRotation=function(rx,ry,rz){this.rotation[0]=rx;this.rotation[1]=ry;this.rotation[2]=rz};BlossomParticle.prototype.setPosition=function(nx,ny,nz){this.position[0]=nx;this.position[1]=ny;this.position[2]=nz};BlossomParticle.prototype.setEulerAngles=function(rx,ry,rz){this.euler[0]=rx;this.euler[1]=ry;this.euler[2]=rz};BlossomParticle.prototype.setSize=function(s){this.size=s};BlossomParticle.prototype.update=function(dt,et){this.position[0]+=this.velocity[0]*dt;this.position[1]+=this.velocity[1]*dt;this.position[2]+=this.velocity[2]*dt;this.euler[0]+=this.rotation[0]*dt;this.euler[1]+=this.rotation[1]*dt;this.euler[2]+=this.rotation[2]*dt};function createPointFlowers(){var prm=gl.getParameter(gl.ALIASED_POINT_SIZE_RANGE);renderSpec.pointSize={'min':prm[0],'max':prm[1]};var vtxsrc=document.getElementById("sakura_point_vsh").textContent;var frgsrc=document.getElementById("sakura_point_fsh").textContent;pointFlower.program=createShader(vtxsrc,frgsrc,['uProjection','uModelview','uResolution','uOffset','uDOF','uFade'],['aPosition','aEuler','aMisc']);useShader(pointFlower.program);pointFlower.offset=new Float32Array([0.0,0.0,0.0]);pointFlower.fader=Vector3.create(0.0,10.0,0.0);pointFlower.numFlowers=1600;pointFlower.particles=new Array(pointFlower.numFlowers);pointFlower.dataArray=new Float32Array(pointFlower.numFlowers*(3+3+2));pointFlower.positionArrayOffset=0;pointFlower.eulerArrayOffset=pointFlower.numFlowers*3;pointFlower.miscArrayOffset=pointFlower.numFlowers*6;pointFlower.buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,pointFlower.buffer);gl.bufferData(gl.ARRAY_BUFFER,pointFlower.dataArray,gl.DYNAMIC_DRAW);gl.bindBuffer(gl.ARRAY_BUFFER,null);unuseShader(pointFlower.program);for(var i=0;i<pointFlower.numFlowers;i++){pointFlower.particles[i]=new BlossomParticle()}}function initPointFlowers(){pointFlower.area=Vector3.create(20.0,20.0,20.0);pointFlower.area.x=pointFlower.area.y*renderSpec.aspect;pointFlower.fader.x=10.0;pointFlower.fader.y=pointFlower.area.z;pointFlower.fader.z=0.1;var PI2=Math.PI*2.0;var tmpv3=Vector3.create(0,0,0);var tmpv=0;var symmetryrand=function(){return(Math.random()*2.0-1.0)};for(var i=0;i<pointFlower.numFlowers;i++){var tmpprtcl=pointFlower.particles[i];tmpv3.x=symmetryrand()*0.3+0.8;tmpv3.y=symmetryrand()*0.2-1.0;tmpv3.z=symmetryrand()*0.3+0.5;Vector3.normalize(tmpv3);tmpv=2.0+Math.random()*1.0;tmpprtcl.setVelocity(tmpv3.x*tmpv,tmpv3.y*tmpv,tmpv3.z*tmpv);tmpprtcl.setRotation(symmetryrand()*PI2*0.5,symmetryrand()*PI2*0.5,symmetryrand()*PI2*0.5);tmpprtcl.setPosition(symmetryrand()*pointFlower.area.x,symmetryrand()*pointFlower.area.y,symmetryrand()*pointFlower.area.z);tmpprtcl.setEulerAngles(Math.random()*Math.PI*2.0,Math.random()*Math.PI*2.0,Math.random()*Math.PI*2.0);tmpprtcl.setSize(0.9+Math.random()*0.1)}}function renderPointFlowers(){var PI2=Math.PI*2.0;var limit=[pointFlower.area.x,pointFlower.area.y,pointFlower.area.z];var repeatPos=function(prt,cmp,limit){if(Math.abs(prt.position[cmp])-prt.size*0.5>limit){if(prt.position[cmp]>0){prt.position[cmp]-=limit*2.0}else{prt.position[cmp]+=limit*2.0}}};var repeatEuler=function(prt,cmp){prt.euler[cmp]=prt.euler[cmp]%PI2;if(prt.euler[cmp]<0.0){prt.euler[cmp]+=PI2}};for(var i=0;i<pointFlower.numFlowers;i++){var prtcl=pointFlower.particles[i];prtcl.update(timeInfo.delta,timeInfo.elapsed);repeatPos(prtcl,0,pointFlower.area.x);repeatPos(prtcl,1,pointFlower.area.y);repeatPos(prtcl,2,pointFlower.area.z);repeatEuler(prtcl,0);repeatEuler(prtcl,1);repeatEuler(prtcl,2);prtcl.alpha=1.0;prtcl.zkey=(camera.matrix[2]*prtcl.position[0]+camera.matrix[6]*prtcl.position[1]+camera.matrix[10]*prtcl.position[2]+camera.matrix[14])}pointFlower.particles.sort(function(p0,p1){return p0.zkey-p1.zkey});var ipos=pointFlower.positionArrayOffset;var ieuler=pointFlower.eulerArrayOffset;var imisc=pointFlower.miscArrayOffset;for(var i=0;i<pointFlower.numFlowers;i++){var prtcl=pointFlower.particles[i];pointFlower.dataArray[ipos]=prtcl.position[0];pointFlower.dataArray[ipos+1]=prtcl.position[1];pointFlower.dataArray[ipos+2]=prtcl.position[2];ipos+=3;pointFlower.dataArray[ieuler]=prtcl.euler[0];pointFlower.dataArray[ieuler+1]=prtcl.euler[1];pointFlower.dataArray[ieuler+2]=prtcl.euler[2];ieuler+=3;pointFlower.dataArray[imisc]=prtcl.size;pointFlower.dataArray[imisc+1]=prtcl.alpha;imisc+=2}gl.enable(gl.BLEND);gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA);var prog=pointFlower.program;useShader(prog);gl.uniformMatrix4fv(prog.uniforms.uProjection,false,projection.matrix);gl.uniformMatrix4fv(prog.uniforms.uModelview,false,camera.matrix);gl.uniform3fv(prog.uniforms.uResolution,renderSpec.array);gl.uniform3fv(prog.uniforms.uDOF,Vector3.arrayForm(camera.dof));gl.uniform3fv(prog.uniforms.uFade,Vector3.arrayForm(pointFlower.fader));gl.bindBuffer(gl.ARRAY_BUFFER,pointFlower.buffer);gl.bufferData(gl.ARRAY_BUFFER,pointFlower.dataArray,gl.DYNAMIC_DRAW);gl.vertexAttribPointer(prog.attributes.aPosition,3,gl.FLOAT,false,0,pointFlower.positionArrayOffset*Float32Array.BYTES_PER_ELEMENT);gl.vertexAttribPointer(prog.attributes.aEuler,3,gl.FLOAT,false,0,pointFlower.eulerArrayOffset*Float32Array.BYTES_PER_ELEMENT);gl.vertexAttribPointer(prog.attributes.aMisc,2,gl.FLOAT,false,0,pointFlower.miscArrayOffset*Float32Array.BYTES_PER_ELEMENT);for(var i=1;i<2;i++){var zpos=i*-2.0;pointFlower.offset[0]=pointFlower.area.x*-1.0;pointFlower.offset[1]=pointFlower.area.y*-1.0;pointFlower.offset[2]=pointFlower.area.z*zpos;gl.uniform3fv(prog.uniforms.uOffset,pointFlower.offset);gl.drawArrays(gl.POINT,0,pointFlower.numFlowers);pointFlower.offset[0]=pointFlower.area.x*-1.0;pointFlower.offset[1]=pointFlower.area.y*1.0;pointFlower.offset[2]=pointFlower.area.z*zpos;gl.uniform3fv(prog.uniforms.uOffset,pointFlower.offset);gl.drawArrays(gl.POINT,0,pointFlower.numFlowers);pointFlower.offset[0]=pointFlower.area.x*1.0;pointFlower.offset[1]=pointFlower.area.y*-1.0;pointFlower.offset[2]=pointFlower.area.z*zpos;gl.uniform3fv(prog.uniforms.uOffset,pointFlower.offset);gl.drawArrays(gl.POINT,0,pointFlower.numFlowers);pointFlower.offset[0]=pointFlower.area.x*1.0;pointFlower.offset[1]=pointFlower.area.y*1.0;pointFlower.offset[2]=pointFlower.area.z*zpos;gl.uniform3fv(prog.uniforms.uOffset,pointFlower.offset);gl.drawArrays(gl.POINT,0,pointFlower.numFlowers)}pointFlower.offset[0]=0.0;pointFlower.offset[1]=0.0;pointFlower.offset[2]=0.0;gl.uniform3fv(prog.uniforms.uOffset,pointFlower.offset);gl.drawArrays(gl.POINT,0,pointFlower.numFlowers);gl.bindBuffer(gl.ARRAY_BUFFER,null);unuseShader(prog);gl.enable(gl.DEPTH_TEST);gl.disable(gl.BLEND)}function createEffectProgram(vtxsrc,frgsrc,exunifs,exattrs){var ret={};var unifs=['uResolution','uSrc','uDelta'];if(exunifs){unifs=unifs.concat(exunifs)}var attrs=['aPosition'];if(exattrs){attrs=attrs.concat(exattrs)}ret.program=createShader(vtxsrc,frgsrc,unifs,attrs);useShader(ret.program);ret.dataArray=new Float32Array([-1.0,-1.0,1.0,-1.0,-1.0,1.0,1.0,1.0]);ret.buffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,ret.buffer);gl.bufferData(gl.ARRAY_BUFFER,ret.dataArray,gl.STATIC_DRAW);gl.bindBuffer(gl.ARRAY_BUFFER,null);unuseShader(ret.program);return ret}function useEffect(fxobj,srctex){var prog=fxobj.program;useShader(prog);gl.uniform3fv(prog.uniforms.uResolution,renderSpec.array);if(srctex!=null){gl.uniform2fv(prog.uniforms.uDelta,srctex.dtxArray);gl.uniform1i(prog.uniforms.uSrc,0);gl.activeTexture(gl.TEXTURE0);gl.bindTexture(gl.TEXTURE_2D,srctex.texture)}}function drawEffect(fxobj){gl.bindBuffer(gl.ARRAY_BUFFER,fxobj.buffer);gl.vertexAttribPointer(fxobj.program.attributes.aPosition,2,gl.FLOAT,false,0,0);gl.drawArrays(gl.TRIANGLE_STRIP,0,4)}function unuseEffect(fxobj){unuseShader(fxobj.program)}var effectLib={};function createEffectLib(){var vtxsrc,frgsrc;var cmnvtxsrc=document.getElementById("fx_common_vsh").textContent;frgsrc=document.getElementById("bg_fsh").textContent;effectLib.sceneBg=createEffectProgram(cmnvtxsrc,frgsrc,['uTimes'],null);frgsrc=document.getElementById("fx_brightbuf_fsh").textContent;effectLib.mkBrightBuf=createEffectProgram(cmnvtxsrc,frgsrc,null,null);frgsrc=document.getElementById("fx_dirblur_r4_fsh").textContent;effectLib.dirBlur=createEffectProgram(cmnvtxsrc,frgsrc,['uBlurDir'],null);vtxsrc=document.getElementById("pp_final_vsh").textContent;frgsrc=document.getElementById("pp_final_fsh").textContent;effectLib.finalComp=createEffectProgram(vtxsrc,frgsrc,['uBloom'],null)}function createBackground(){}function initBackground(){}function renderBackground(){gl.disable(gl.DEPTH_TEST);useEffect(effectLib.sceneBg,null);gl.uniform2f(effectLib.sceneBg.program.uniforms.uTimes,timeInfo.elapsed,timeInfo.delta);drawEffect(effectLib.sceneBg);unuseEffect(effectLib.sceneBg);gl.enable(gl.DEPTH_TEST)}var postProcess={};function createPostProcess(){}function initPostProcess(){}function renderPostProcess(){gl.enable(gl.TEXTURE_2D);gl.disable(gl.DEPTH_TEST);var bindRT=function(rt,isclear){gl.bindFramebuffer(gl.FRAMEBUFFER,rt.frameBuffer);gl.viewport(0,0,rt.width,rt.height);if(isclear){gl.clearColor(0,0,0,0);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT)}};bindRT(renderSpec.wHalfRT0,true);useEffect(effectLib.mkBrightBuf,renderSpec.mainRT);drawEffect(effectLib.mkBrightBuf);unuseEffect(effectLib.mkBrightBuf);for(var i=0;i<2;i++){var p=1.5+1*i;var s=2.0+1*i;bindRT(renderSpec.wHalfRT1,true);useEffect(effectLib.dirBlur,renderSpec.wHalfRT0);gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir,p,0.0,s,0.0);drawEffect(effectLib.dirBlur);unuseEffect(effectLib.dirBlur);bindRT(renderSpec.wHalfRT0,true);useEffect(effectLib.dirBlur,renderSpec.wHalfRT1);gl.uniform4f(effectLib.dirBlur.program.uniforms.uBlurDir,0.0,p,0.0,s);drawEffect(effectLib.dirBlur);unuseEffect(effectLib.dirBlur)}gl.bindFramebuffer(gl.FRAMEBUFFER,null);gl.viewport(0,0,renderSpec.width,renderSpec.height);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);useEffect(effectLib.finalComp,renderSpec.mainRT);gl.uniform1i(effectLib.finalComp.program.uniforms.uBloom,1);gl.activeTexture(gl.TEXTURE1);gl.bindTexture(gl.TEXTURE_2D,renderSpec.wHalfRT0.texture);drawEffect(effectLib.finalComp);unuseEffect(effectLib.finalComp);gl.enable(gl.DEPTH_TEST)}var SceneEnv={};function createScene(){createEffectLib();createBackground();createPointFlowers();createPostProcess();sceneStandBy=true}function initScene(){initBackground();initPointFlowers();initPostProcess();camera.position.z=pointFlower.area.z+projection.nearfar[0];projection.angle=Math.atan2(pointFlower.area.y,camera.position.z+pointFlower.area.z)*180.0/Math.PI*2.0;Matrix44.loadProjection(projection.matrix,renderSpec.aspect,projection.angle,projection.nearfar[0],projection.nearfar[1])}function renderScene(){Matrix44.loadLookAt(camera.matrix,camera.position,camera.lookat,camera.up);gl.enable(gl.DEPTH_TEST);gl.bindFramebuffer(gl.FRAMEBUFFER,renderSpec.mainRT.frameBuffer);gl.viewport(0,0,renderSpec.mainRT.width,renderSpec.mainRT.height);gl.clearColor(0.005,0,0.05,0);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);renderBackground();renderPointFlowers();renderPostProcess()}function onResize(e){makeCanvasFullScreen(document.getElementById("sakura"));setViewports();if(sceneStandBy){initScene()}}function setViewports(){renderSpec.setSize(gl.canvas.width,gl.canvas.height);gl.clearColor(0.2,0.2,0.5,1.0);gl.viewport(0,0,renderSpec.width,renderSpec.height);var rtfunc=function(rtname,rtw,rth){var rt=renderSpec[rtname];if(rt)deleteRenderTarget(rt);renderSpec[rtname]=createRenderTarget(rtw,rth)};rtfunc('mainRT',renderSpec.width,renderSpec.height);rtfunc('wFullRT0',renderSpec.width,renderSpec.height);rtfunc('wFullRT1',renderSpec.width,renderSpec.height);rtfunc('wHalfRT0',renderSpec.halfWidth,renderSpec.halfHeight);rtfunc('wHalfRT1',renderSpec.halfWidth,renderSpec.halfHeight)}function render(){renderScene()}var animating=true;function toggleAnimation(elm){animating^=true;if(animating)animate();if(elm){elm.innerHTML=animating?"Stop":"Start"}}function stepAnimation(){if(!animating)animate()}function animate(){var curdate=new Date();timeInfo.elapsed=(curdate-timeInfo.start)/1000.0;timeInfo.delta=(curdate-timeInfo.prev)/1000.0;timeInfo.prev=curdate;if(animating)requestAnimationFrame(animate);render()}function makeCanvasFullScreen(canvas){var b=document.body;var d=document.documentElement;fullw=Math.max(b.clientWidth,b.scrollWidth,d.scrollWidth,d.clientWidth);fullh=Math.max(b.clientHeight,b.scrollHeight,d.scrollHeight,d.clientHeight);canvas.width=fullw;canvas.height=fullh}window.addEventListener('load',function(e){var canvas=document.getElementById("sakura");try{makeCanvasFullScreen(canvas);gl=canvas.getContext('experimental-webgl')}catch(e){alert("WebGL not supported."+e);console.error(e);return}window.addEventListener('resize',onResize);setViewports();createScene();initScene();timeInfo.start=new Date();timeInfo.prev=timeInfo.start;animate()});(function(w,r){w['r'+r]=w['r'+r]||w['webkitR'+r]||w['mozR'+r]||w['msR'+r]||w['oR'+r]||function(c){w.setTimeout(c,1000/60)}})(window,'equestAnimationFrame');</script>-->
</body>



</html>
